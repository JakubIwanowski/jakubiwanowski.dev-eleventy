<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Beginner&#39;s Guide to Eleventy - part tow</title>
    <meta name="description" content="Second part of a beginner&#39;s guide to eleventy">
    <link rel="stylesheet" href="/assets/css/global.css">
      <link rel="shortcut icon" type="image/png" href="/assets/images/favicon.png"/>
    <link rel="canonical" href="https://jakubiwanowski.dev/blog/eleventy-guide-part-two/">
    <link rel="me" href="https://fosstodon.org/@dzajew">
    
        <link href="/assets/css/highlight/gruvbox-light.css" rel="stylesheet">
        
</head>
<body>
    <header class="header">
    <div class="container">
      <nav class="nav">
        <ul class="nav__list">
  <li class="nav__list__el">
    <a href="/" class="nav__list__link ">Home</a>
  </li>
  <li class="nav__list__el">
    <a href="/blog/" class="nav__list__link active">Blog</a>
  </li>
  <li class="nav__list__el">
    <a href="mailto:jakub.iwanowski@tutanota.com" class="nav__list__link ">Contact</a>
  </li>
  <li class="nav__list__el">
    <a href="/blog/posts.rss" class="nav__list__link ">RSS</a>
  </li></ul>
      </nav>
    </div>
</header>
    <main>
       <div class="post-content container">
        <div class="post__date">
  09-01-2023
</div>
        <h1>A Beginner's Guide to Eleventy - part two</h1>
<p>As I have said in <a href="/blog/eleventy-guide-part-one">the previous part of our series</a>, we'll talk today about Sass and layouts. Pure CSS is great, but sometimes you may need/want to use some extra features of Sass, so here's how you do it!.</p>
<h2>Sass</h2>
<p>In order to add scss files to your project you can either use built in functions, Eleventy supports Sass out of the box, or install one of the many plugins. You can check out <a href="https://www.11ty.dev/docs/languages/custom/#example-add-sass-support-to-eleventy">Eleventy's documentation about adding Sass support</a>. In this guide we'll be using Kentaro Imai's plugin - <a href="https://www.npmjs.com/package/eleventy-sass">eleventy-sass</a>. It's just a matter of preference, Whatever option you'll choose, it'll be fine.</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> eleventy-sass</code></pre>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> eleventySass <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"eleventy-sass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">eleventyConfig</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  eleventyConfig<span class="token punctuation">.</span><span class="token function">addPlugin</span><span class="token punctuation">(</span>eleventySass<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>This how your configuration in <strong>.eleventy.js</strong> should look like. I like to add PostCSS plugin to add some extra fromatting to my CSS files.</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> postcss autoprefixer</code></pre>
<p>and in the configuration file:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> eleventySass <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"eleventy-sass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> postcss <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"postcss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> autoprefixer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"autoprefixer"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">eleventyConfig</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>eleventyConfig<span class="token punctuation">.</span><span class="token function">addPlugin</span><span class="token punctuation">(</span>eleventySass<span class="token punctuation">,</span> <span class="token punctuation">{</span><br>    <span class="token literal-property property">postcss</span><span class="token operator">:</span> <span class="token function">postcss</span><span class="token punctuation">(</span><span class="token punctuation">[</span>autoprefixer<span class="token punctuation">]</span><span class="token punctuation">)</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>The plugin will detect our scss files and  put them inside <em>_site</em> in respective folders, for example <em>assets/css/global.scss</em> will end up in <em>_site/assets/css/global.css</em>. The autoprefixer plugin will add prefixes to declarations that need them. Like I said before, there are a few ways you can configure your Sass processing. Only recently I had the following configuration:</p>
<pre class="language-json"><code class="language-json">    <span class="token property">"watch:sass"</span><span class="token operator">:</span> <span class="token string">"npx sass assets/css:_site/assets/css/ --watch"</span><span class="token punctuation">,</span><br>    <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"npm run watch:eleventy &amp; npm run watch:sass"</span><span class="token punctuation">,</span></code></pre>
<p>This is a snippet from my <strong>package.json</strong>, as you can see it is quite simple.</p>
<h2>Layouts</h2>
<p>You don't want to write HTML for each of your posts or pages manually, this is where layouts come in. Layouts are stored in <strong>_includes</strong> folder by default. You can also store them in subdirectories. If you want to change the default settings, you can do it following <a href="https://www.11ty.dev/docs/config/#directory-for-layouts-(optional)">Eleventy's docs</a>.<br>
Let's create our first layout. Create file <strong>postlayout.njk</strong> in <strong>_includes</strong> directory.</p>
<pre class="language-njk"><code class="language-njk"><span class="token operator">&lt;</span>!<span class="token variable">DOCTYPE</span> <span class="token variable">html</span><span class="token operator">></span><br><span class="token operator">&lt;</span><span class="token variable">html</span> <span class="token variable">lang</span><span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">></span><br><span class="token operator">&lt;</span><span class="token variable">head</span><span class="token operator">></span><br>    <span class="token operator">&lt;</span><span class="token variable">meta</span> <span class="token variable">charset</span><span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">></span><br>    <span class="token operator">&lt;</span><span class="token variable">meta</span> <span class="token variable">http</span><span class="token operator">-</span><span class="token variable">equiv</span><span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> <span class="token variable">content</span><span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">></span><br>    <span class="token operator">&lt;</span><span class="token variable">meta</span> <span class="token variable">name</span><span class="token operator">=</span><span class="token string">"viewport"</span> <span class="token variable">content</span><span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">></span><br>    <span class="token operator">&lt;</span><span class="token variable">title</span><span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token variable">title</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token variable">title</span><span class="token operator">></span><br>    <span class="token operator">&lt;</span><span class="token variable">meta</span> <span class="token variable">name</span><span class="token operator">=</span><span class="token string">"description"</span> <span class="token variable">content</span><span class="token operator">=</span><span class="token string">"{{description}}"</span><span class="token operator">></span><br>    <span class="token operator">&lt;</span><span class="token variable">link</span> <span class="token variable">rel</span><span class="token operator">=</span><span class="token string">"stylesheet"</span> <span class="token variable">href</span><span class="token operator">=</span><span class="token string">"style.css"</span><span class="token operator">></span><br><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token variable">head</span><span class="token operator">></span><br><span class="token operator">&lt;</span><span class="token variable">body</span><span class="token operator">></span><br>    <span class="token punctuation">{</span><span class="token operator">%</span> <span class="token variable">include</span> <span class="token string">'_navigation.njk'</span> <span class="token operator">%</span><span class="token punctuation">}</span><br>    <span class="token operator">&lt;</span><span class="token variable">main</span><span class="token operator">></span><br>       <span class="token operator">&lt;</span><span class="token variable">div</span> <span class="token variable">class</span><span class="token operator">=</span><span class="token string">"post-content container"</span><span class="token operator">></span><br>       <span class="token operator">&lt;</span><span class="token variable">h1</span><span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token variable">title</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token variable">h1</span><span class="token operator">></span><br>        <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token variable">content</span> <span class="token operator">|</span> <span class="token variable">safe</span><span class="token punctuation">}</span><span class="token punctuation">}</span><br>       <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token variable">div</span><span class="token operator">></span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token variable">main</span><span class="token operator">></span><br><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token variable">body</span><span class="token operator">></span><br><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token variable">html</span><span class="token operator">></span></code></pre>
<p>As you can see it's almost plain ol'HTML, but there are some small differences. We're inserting title and description from each post into our template. <em>Content</em> is our post content. We also add <code>safe</code> filter to prevent double-escaping. For example, if we didn't use the filter, tags, and special characters in general, like <code>&lt;strong&gt;</code> would be presented like this: <code>&amp;lt;strong&amp;gt;</code>. But how does Eleventy know what's the title or description? Front matter.</p>
<h3 id="front-matter">Front matter</h3>
<p>In the previous part of the guide I didn't explain what front matter is, sooo.. front matter is our meta data. We can use it in out templates things like titles, descriptions, dates, and other useful things. You open and close it with three dashes: <code>---</code>.</p>
<pre class="language-markdown"><code class="language-markdown"><span class="token front-matter-block"><span class="token punctuation">---</span><br><span class="token front-matter yaml language-yaml"><span class="token key atrule">title</span><span class="token punctuation">:</span> <span class="token string">"Post title"</span><br><span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token string">"Post description"</span></span><br><span class="token punctuation">---</span></span><br>Some content</code></pre>
<h2>Using layouts</h2>
<p>So how do we tell Eleventy, we want use a given layout? We can do this using front matter:</p>
<pre class="language-yaml"><code class="language-yaml"><span class="token punctuation">---</span><br><span class="token key atrule">layout</span><span class="token punctuation">:</span> postlayout.njk<br><span class="token key atrule">title</span><span class="token punctuation">:</span> <span class="token string">"Page title"</span><br><span class="token punctuation">---</span></code></pre>
<p>You might ask: what if I don't want to set layout every time I write a new post? And that would be a very good question. Remember <strong>_posts.json</strong> in <strong>_posts</strong> folder?</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br>  <span class="token property">"permalink"</span><span class="token operator">:</span> <span class="token string">"/blog/{{ page.fileSlug }}/index.html"</span><span class="token punctuation">,</span><br>  <span class="token property">"tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"posts"</span><span class="token punctuation">]</span><br><span class="token punctuation">}</span></code></pre>
<p>You can set here a layout which will be used for all posts, just like this:</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br>  <span class="token property">"permalink"</span><span class="token operator">:</span> <span class="token string">"/blog/eleventy-guide-part-one/index.html"</span><span class="token punctuation">,</span><br>  <span class="token property">"tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"posts"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>  <span class="token property">"layout"</span><span class="token operator">:</span> <span class="token string">"postslayout.njk"</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span></code></pre>
<h2>Limiting the number of post you want to display</h2>
<p>Let's get back for a moment to our homepage, where we are displaying newest posts. If you don't want to show all posts that you have ever published, you can limit the loop to 3/4 etc. most recent posts.</p>
<pre class="language-njk"><code class="language-njk"><span class="token operator">&lt;</span><span class="token variable">ul</span> <span class="token variable">class</span><span class="token operator">=</span><span class="token string">"post__list"</span><span class="token operator">></span><br>    <span class="token punctuation">{</span><span class="token operator">%</span><span class="token operator">-</span> <span class="token keyword">for</span> <span class="token variable">post</span> <span class="token keyword">in</span> <span class="token variable">collections</span><span class="token punctuation">.</span><span class="token variable">posts</span> <span class="token operator">|</span> <span class="token variable">reverse</span> <span class="token operator">-</span><span class="token operator">%</span><span class="token punctuation">}</span><br>        <span class="token punctuation">{</span><span class="token operator">%</span> <span class="token function">if</span> <span class="token punctuation">(</span><span class="token keyword">loop</span><span class="token punctuation">.</span><span class="token variable">index</span> <span class="token operator">&lt;=</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">%</span><span class="token punctuation">}</span><br>            <span class="token operator">&lt;</span><span class="token variable">li</span><br>            <span class="token variable">class</span><span class="token operator">=</span><span class="token string">"post__list__el"</span><br>            <span class="token operator">></span><br>                <span class="token operator">&lt;</span><span class="token variable">div</span> <span class="token variable">class</span><span class="token operator">=</span><span class="token string">"post__date"</span><span class="token operator">></span><br>                    <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token variable">post</span><span class="token punctuation">.</span><span class="token variable">data</span><span class="token punctuation">.</span><span class="token variable">date</span><span class="token punctuation">}</span><span class="token punctuation">}</span><br>                <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token variable">div</span><span class="token operator">></span><br>                <span class="token operator">&lt;</span><span class="token variable">a</span> <span class="token variable">href</span><span class="token operator">=</span><span class="token string">"{{post.url}}"</span><span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token variable">post</span><span class="token punctuation">.</span><span class="token variable">data</span><span class="token punctuation">.</span><span class="token variable">title</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token variable">a</span><span class="token operator">></span><br>                    <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token variable">post</span><span class="token punctuation">.</span><span class="token variable">data</span><span class="token punctuation">.</span><span class="token variable">excerpt</span><span class="token punctuation">}</span><span class="token punctuation">}</span><br>            <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token variable">li</span><span class="token operator">></span><br>        <span class="token punctuation">{</span><span class="token operator">%</span> <span class="token variable">endif</span> <span class="token operator">%</span><span class="token punctuation">}</span><br>            <span class="token punctuation">{</span><span class="token operator">%</span><span class="token operator">-</span> <span class="token variable">endfor</span> <span class="token operator">-</span><span class="token operator">%</span><span class="token punctuation">}</span><br><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token variable">ul</span><span class="token operator">></span></code></pre>
<p>The loop goes through the posts, in a reverse order, see <code>reverse</code> filter, and limits the output to three latest posts. You can provide a publication date in front matter, if you don't do that, file's (post's) creation date will be used instead.</p>
<h2>Wrapping up</h2>
<p>We've learned how to use Sass in our Eleventy project, and how to use layouts. I hope you enjoyed it, and that this short guide will be helpful to someone. If you haven any comments you can reach me by mail. You can also find me on Mastodon: <a href="https://fosstodon.org/@dzajew" target="_blank">@dzajew@fosstodon.org</a>.</p>

       </div>
    </main>
    
</body>
</html>
